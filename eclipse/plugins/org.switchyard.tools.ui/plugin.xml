<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension-point id="switchYardComponent" name="SwitchYardComponent" schema="schema/switchYardComponent.exsd"/>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="org.switchyard.tools.ui"
            name="SwitchYard">
      </category>
      <wizard
            category="org.switchyard.tools.ui"
            class="org.switchyard.tools.ui.wizards.NewSwitchYardProjectWizard"
            descriptionImage="icons/switchyard_logo_200px.png"
            icon="icons/switchyard_icon_16px.png"
            id="org.switchyard.tools.ui.wizards.NewSwitchYardProjectWizard"
            name="SwitchYard Project"
            project="true">
         <description>Create a new SwitchYard project.</description>
      </wizard>
      <wizard
            category="org.switchyard.tools.ui"
            class="org.switchyard.tools.ui.wizards.NewBeanServiceWizard"
            descriptionImage="icons/switchyard_logo_200px.png"
            icon="icons/switchyard_icon_16px.png"
            id="org.switchyard.tools.ui.wizards.NewBeanServiceWizard"
            name="Bean Service">
         <description>Create a new SwitchYard Bean service.</description>
      </wizard>
      <wizard
            category="org.switchyard.tools.ui"
            class="org.switchyard.tools.ui.wizards.NewServiceTestClassWizard"
            descriptionImage="icons/switchyard_logo_200px.png"
            icon="icons/switchyard_icon_16px.png"
            id="org.switchyard.tools.ui.wizards.NewServiceTestWizard"
            name="Service Test">
         <description>Create a new SwitchYard service test.</description>
      </wizard>
   </extension>
   <extension
         point="org.eclipse.m2e.core.indexes">
      <index
            indexId="JBOSS_NEXUS"
            isShort="true"
            repositoryUrl="http://repository.jboss.org/nexus/content/groups/public">
      </index>
   </extension>
   <extension
         point="org.eclipse.wst.common.project.facet.core.presets">
      <dynamic-preset
            id="preset.switchyard.basic">
         <factory
               class="org.switchyard.tools.ui.facets.SwitchYardBasicPresetFactory">
         </factory>
      </dynamic-preset>
      <static-preset
            extends="preset.switchyard.basic"
            id="preset.switchyard.jar">
         <description>
            Project facet set for SwitchYard JAR applications.
         </description>
         <label>
            SwitchYard Java Application
         </label>
         <facet
               id="jst.utility"
               version="1.0">
         </facet>
      </static-preset>
   </extension>

   <extension
         point="org.eclipse.wst.common.project.facet.core.facets">
      <project-facet
            id="switchyard.core">
         <default-version
               version="1.0">
         </default-version>
    	 <property name="hide.version" value="true"/>
         <description>
            SwitchYard functionality.
         </description>
         <label>
            SwitchYard
         </label>
      </project-facet>
      <project-facet-version
            facet="switchyard.core"
            version="1.0">
         <constraint>
         	<and>
	            <requires
	                  facet="jst.java"
	                  version="[6.0">
	            </requires>
	            <!-- currently only support maven builds -->
	            <requires
                   facet="jboss.m2"
                   soft="true"
                   version="*">
	            </requires>
            </and>
         </constraint>
      </project-facet-version>
      <action
            facet="switchyard.core"
            id="switchyard.core.install"
            type="install"
            version="1.0">
         <delegate
               class="org.switchyard.tools.ui.facets.SwitchYardFacetInstallActionDelegate">
         </delegate>
         <config-factory
               class="org.switchyard.tools.ui.facets.SwitchYardFacetInstallConfigFactory">
         </config-factory>
      </action>
      <action
            facet="switchyard.core"
            id="switchyard.core.uninstall"
            type="uninstall"
            version="1.0">
         <delegate
               class="org.switchyard.tools.ui.facets.SwitchYardFacetUnInstallActionDelegate">
         </delegate>
      </action>
   </extension>

  <extension point="org.eclipse.wst.common.project.facet.ui.images">
    <image 
      facet="switchyard.core" 
      path="icons/switchyard_icon_16px.png"/>
  </extension>

  <extension point="org.eclipse.wst.common.project.facet.ui.wizardPages">
    <wizard-pages action="switchyard.core.install">
      <page class="org.switchyard.tools.ui.facets.SwitchYardFacetInstallWizardPage"/>
    </wizard-pages>
  </extension>
  <extension
        point="org.eclipse.wst.common.project.facet.core.runtimes">
     <supported>
        <facet
              id="switchyard.core"
              version="1.0">
        </facet>
        <runtime-component
              any="true">
        </runtime-component>
     </supported>
  </extension>
  <!--
  <extension
        point="org.eclipse.wst.common.project.facet.core.defaultFacets">
     <default-facets>
        <facet
              id="switchyard.core"
              version="1.0">
        </facet>
        <runtime-component
              id="org.jboss.ide.eclipse.as.runtime.component"
              version="[7.0">
        </runtime-component>
     </default-facets>
  </extension>
  -->

  <extension
        point="org.eclipse.wst.server.core.moduleTypes">
     <moduleType
           id="switchyard.core"
           name="SwitchYard Application">
     </moduleType>
  </extension>
  <extension
        point="org.eclipse.wst.common.modulecore.componentimpl">
     <componentimpl
           typeID="switchyard.core"
           class="org.eclipse.jst.j2ee.componentcore.J2EEModuleVirtualComponent">
     </componentimpl>
  </extension>
  <extension
        point="org.eclipse.wst.server.core.moduleFactories">
     <moduleFactory
           class="org.eclipse.jst.jee.internal.deployables.JEEDeployableFactory"
           id="switchyard.deployable"
           order="10"
           projects="true">
        <moduleType
              types="switchyard.core"
              versions="1.0">
        </moduleType>
     </moduleFactory>
  </extension>
  <extension
        point="org.eclipse.wst.server.core.moduleArtifactAdapters">
     <moduleArtifactAdapter
           class="org.switchyard.tools.ui.modules.SwitchYardModuleArtifactAdapterDelegate"
           id="org.switchyard.tools.ui.moduleArtifactAdapter1">
          <enablement>
             <with
                   variable="selection">
                <adapt
                      type="org.eclipse.core.resources.IProject">
                   <test
                         forcePluginActivation="true"
                         property="org.eclipse.wst.common.project.facet.core.projectFacet"
                         value="switchyard.core">
                   </test>
                </adapt>
             </with></enablement>
     </moduleArtifactAdapter>
  </extension>
  <extension point="org.eclipse.wst.server.ui.serverImages">
    <image 
      id="org.switchyard.tools.switchyard.core"
      typeIds="switchyard.core" 
      icon="icons/switchyard_icon_16px.png"/>
  </extension>
  <extension
        point="org.eclipse.ui.propertyPages">
     <page
           category="org.eclipse.wst.common.project.facet.ui.FacetsPropertyPage"
           class="org.switchyard.tools.ui.properties.SwitchYardSettingsPropertyPage"
           id="org.switchyard.tools.ui.configuration.page"
           name="SwitchYard Settings"
           selectionFilter="single">
        <enabledWhen>
           <adapt
                 type="org.eclipse.core.resources.IProject">
              <test
                    property="org.eclipse.wst.common.project.facet.core.projectFacet"
                    value="switchyard.core">
              </test>
           </adapt>
        </enabledWhen>
     </page>
  </extension>
  <extension
        point="org.eclipse.ui.popupMenus">
     <objectContribution
           adaptable="true"
           id="org.switchyard.tools.ui.configuration.menu"
           objectClass="org.eclipse.core.resources.IProject">
        <action
              class="org.switchyard.tools.ui.actions.SwitchYardSettingsAction"
              enablesFor="1"
              id="org.switchyard.tools.ui.configuration.action.settings"
              label="SwitchYard Capabilities..."
              menubarPath="org.eclipse.ui.projectConfigure/additions">
        </action>
        <visibility>
           <objectState
                 name="projectNature"
                 value="org.eclipse.m2e.core.maven2Nature">
           </objectState>
        </visibility>
     </objectContribution>
  </extension>
  <extension
        point="org.switchyard.tools.ui.switchYardComponent">
     <component
           id="org.switchyard:switchyard-runtime"
           name="Runtime"
           scannerClass="org.switchyard.transform.config.model.TransformSwitchYardScanner">
        <description>
           Core SwitchYard runtime dependencies.
        </description>
        <dependency>
           <groupId>org.switchyard</groupId>
           <artifactId>switchyard-api</artifactId>
        </dependency>
        <dependency>
           <groupId>org.switchyard</groupId>
           <artifactId>switchyard-plugin</artifactId>
        </dependency>
        <dependency>
           <groupId>org.switchyard</groupId>
           <artifactId>switchyard-test</artifactId>
        </dependency>
     </component>
     <component
           id="org.switchyard.components:switchyard-component-bean"
           name="Bean"
           scannerClass="org.switchyard.component.bean.config.model.BeanSwitchYardScanner">
        <description>
           Provides support for Java based service implementations.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-bean</artifactId>
        </dependency>
     </component>
     <component
           name="BPEL"
           id="org.switchyard.components:switchyard-component-bpel">
        <description>
           Provides support for BPEL based service implementations.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-bpel</artifactId>
        </dependency>
     </component>
     <component
           id="org.switchyard.components:switchyard-component-bpm"
           name="BPM (jBPM)"
           scannerClass="org.switchyard.component.bpm.config.model.BPMSwitchYardScanner">
        <description>
           Provides support for BPM based service implementations.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-bpm</artifactId>
        </dependency>
     </component>
     <component
           id="org.switchyard.components:switchyard-component-camel"
           name="Camel"
           scannerClass="org.switchyard.component.camel.config.model.RouteScanner">
        <description>
           Provides support for Camel based service implementations and Camel based gateways.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-camel</artifactId>
        </dependency>
     </component>
     <component
           name="Clojure"
           id="org.switchyard.components:switchyard-component-clojure">
        <description>
           Provides support for Clojure based service implementations.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-clojure</artifactId>
        </dependency>
     </component>
     <component
           name="HornetQ"
           id="org.switchyard.components:switchyard-component-hornetq">
        <description>
           Provides support for HornetQ based gateways.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-hornetq</artifactId>
        </dependency>
     </component>
     <component
           id="org.switchyard.components:switchyard-component-rules"
           name="Rules (Drools)"
           scannerClass="org.switchyard.component.rules.config.model.RulesSwitchYardScanner">
        <description>
           Provides support for Drools based service implementations.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-rules</artifactId>
        </dependency>
     </component>
     <component
           id="org.switchyard.components:switchyard-component-soap"
           name="SOAP">
        <description>
           Provides support for SOAP based gateways.
        </description>
        <dependency>
           <groupId>org.switchyard.components</groupId>
           <artifactId>switchyard-component-soap</artifactId>
        </dependency>
     </component>
  </extension>

</plugin>
